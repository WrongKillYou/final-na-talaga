{% extends 'base.html' %}
{% load static %}

{% block title %}Event Detail{% endblock %}

{% block content %}
<div class="container my-4">
    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="mb-0">{{ event.title }}</h2>
        <div class="d-flex gap-2">
            <a href="{% url 'information:edit_event' event.id %}" class="btn btn-outline-warning btn-sm">
                <i class="bi bi-pencil"></i> Edit
            </a>
            <form action="{% url 'information:delete_event' event.id %}" method="POST" class="d-inline">
                {% csrf_token %}
                <button type="submit" class="btn btn-outline-danger btn-sm" onclick="return confirm('Are you sure you want to delete this event?');">
                    <i class="bi bi-trash"></i> Delete
                </button>
            </form>
        </div>
    </div>

    <!-- Event Info Card -->
    <div class="card shadow-sm mb-4">
        <div class="card-body">
            <!-- Date & Time -->
            <p class="mb-2">
                <i class="bi bi-calendar-event me-2"></i>
                <strong>Date & Time:</strong>
                <br>
                <span class="text-primary fw-bold">{{ event.start_datetime|date:"M d, Y H:i" }}</span>
                {% if event.end_datetime %}
                    - <span class="text-primary fw-bold">{{ event.end_datetime|date:"M d, Y H:i" }}</span>
                {% endif %}
            </p>

            <!-- Location -->
            {% if event.location %}
                <p class="mb-2">
                    <i class="bi bi-geo-alt me-2"></i>
                    <strong>Location:</strong>
                    <span class="text-success">{{ event.location }}</span>
                </p>
            {% endif %}

            <!-- Target Audience -->
            <p class="mb-2">
                <i class="bi bi-people me-2"></i>
                <strong>Audience:</strong>
                <span class="text-secondary">{{ event.target_audience|capfirst }}</span>
            </p>

            <!-- Description -->
            {% if event.description %}
                <hr>
                <h5>Description</h5>
                <p>{{ event.description }}</p>
            {% endif %}

            <!-- Status -->
            {% if event.is_cancelled %}
                <span class="badge bg-danger">Cancelled</span>
            {% endif %}
            {% if event.is_active and not event.is_cancelled %}
                {% if event.start_datetime <= now <= event.end_datetime %}
                    <span class="badge bg-success">Ongoing</span>
                {% elif event.start_datetime > now %}
                    <span class="badge bg-primary">Upcoming</span>
                {% else %}
                    <span class="badge bg-secondary">Past</span>
                {% endif %}
            {% endif %}
        </div>
    </div>

    <!-- Back Button -->
    <a href="{% url 'users:teacher_dashboard' %}" class="btn btn-outline-secondary">
        <i class="bi bi-arrow-left"></i> Back to Dashboard
    </a>
</div>
{% endblock %}
